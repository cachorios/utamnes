///*!
//* jQuery MsgBox - for jQuery 1.3+
//* http://codecanyon.net/item/jquery-msgbox/92626?ref=aeroalquimia
//*
//* Copyright (c) 2013, Eduardo Daniel Sada
//* Released under CodeCanyon Regular License.
//* http://codecanyon.net/licenses/regular
//*
//* Version: 1.3.6 (Mar 02 2013)
//*/
//;eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(9($){v m=!$.2C.1E;8($.q===Q){$.11({q:9(a,b){8(a){q=9(){F a.2B(b||4,2M)}};F q}})};$.11($.2A,{21:9(x,t,b,c,d,s){8(s===Q)s=1;F c*((t=t/d-1)*t*((s+1)*t+s)+1)+b}});$.11($.2D[\':\'],{w:9(a){F $(a).2t()}});$.11({1v:{2s:{r:\'2o-B\',K:2H,C:2U,E:\'1K\',1c:\'#2E\',1Y:P,L:{\'1c-1L\':\'#3k\',\'1E\':0.5},1B:2F,1i:1l,1N:2Y,16:{\'2n\':10,\'20\':1l,\'Z\':\'21\',\'2m\':2},p:{\'12\':N,\'1f\':\'#\',\'1a\':\'1D\'},2l:\'X\'},6:{},7:{B:[],Y:[],p:[],U:[],V:[]},1g:N,i:0,1A:N,22:9(a){4.6=$.11(P,4.6,a);4.L.A.u(4.6.L);4.L.6.1J=!4.6.1Y;4.7.B.u({\'C\':4.6.C,\'E\':4.6.E,\'1c-1L\':4.6.1c});4.17()},L:{1s:9(b){4.6=b;4.A=$(\'<T 2j="\'+2i 2h().2f()+\'"></T>\');4.A.u($.11({},{\'W\':\'3o\',\'X\':0,\'J\':0,\'1E\':0,\'18\':\'1m\',\'z-2c\':4.6.K},4.6.1V));4.A.1h($.q(9(a){8(4.6.1J){8($.1Z(4.6.1j)){4.6.1j()}G{4.1k()}}a.1d()},4));4.1q=P;4.2a();F 4},2a:9(){4.1G=$(1r.1P);4.1G.M(4.A);8(m){4.A.u({\'W\':\'1t\'});v a=2N(4.A.u(\'K\'));8(!a){a=1;v b=4.A.u(\'W\');8(b==\'2Q\'||!b){4.A.u({\'W\':\'2S\'})}4.A.u({\'K\':a})}a=(!!(4.6.K||4.6.K===0)&&a>4.6.K)?4.6.K:a-1;8(a<0){a=1}4.O=$(\'<2V 2j="2X\'+2i 2h().2f()+\'" 3E="2Z" 30=0 33=""></T>\');4.O.u({K:a,W:\'1t\',X:0,J:0,1u:\'1m\',C:0,E:0,1E:0});4.O.36(4.A);$(\'3e, 1P\').u({\'E\':\'1l%\',\'C\':\'1l%\',\'29-J\':0,\'29-3n\':0})}},15:9(x,y){4.A.u({\'E\':0,\'C\':0});8(4.O)4.O.u({\'E\':0,\'C\':0});v a={x:$(1r).C(),y:$(1r).E()};4.A.u({\'C\':\'1l%\',\'E\':y?y:a.y});8(4.O){4.O.u({\'E\':0,\'C\':0});4.O.u({\'W\':\'1t\',\'J\':0,\'X\':0,\'C\':4.A.C(),\'E\':y?y:a.y})}F 4},14:9(){8(!4.1q)F 4;8(4.Z)4.Z.1M();4.1G.S(\'15\',$.q(4.15,4));4.15();8(4.O)4.O.u({\'18\':\'26\'});4.1q=N;4.Z=4.A.2G(4.6.1B,$.q(9(){4.A.1O(\'14\')},4));F 4},1k:9(){8(4.1q)F 4;8(4.Z)4.Z.1M();4.1G.2I(\'15\');8(4.O)4.O.u({\'18\':\'1m\'});4.1q=P;4.Z=4.A.2L(4.6.1i,$.q(9(){4.A.1O(\'1k\');4.A.u({\'E\':0,\'C\':0})},4));F 4}},1s:9(){4.6=$.11(P,4.2s,4.6);4.L.1s({1V:4.6.L,1J:!4.6.1Y,K:4.6.K-1,1B:4.6.1B,1i:4.6.1i});4.7.B=$(\'<T I="\'+4.6.r+\'"></T>\');4.7.B.u({\'18\':\'1m\',\'W\':\'1t\',\'X\':0,\'J\':0,\'C\':4.6.C,\'E\':4.6.E,\'z-2c\':4.6.K,\'25-2O\':\'2P-25\',\'-24-1R-1S\':\'0 0 1T 1U(0, 0, 0, 0.5)\',\'-2k-1R-1S\':\'0 0 1T 1U(0, 0, 0, 0.5)\',\'1R-1S\':\'0 0 1T 1U(0, 0, 0, 0.5)\',\'-24-1u-1W\':\'1X\',\'-2k-1u-1W\':\'1X\',\'1u-1W\':\'1X\',\'1c-1L\':4.6.1c});4.7.Y=$(\'<T I="\'+4.6.r+\'-Y"></T>\');4.7.B.M(4.7.Y);4.7.p=$(\'<p 1f="\'+4.6.32+\'" 1a="1D"></p>\');4.7.Y.M(4.7.p);4.7.Y.u({E:(m?1F:\'1K\'),\'34-E\':1F,\'35\':1});$(\'1P\').M(4.7.B);4.23();F 4.7.B},23:9(){$(1b).S(\'15\',$.q(9(){8(4.1g){4.L.15();4.17()}},4));$(1b).S(\'37\',$.q(9(){8(4.1g){4.17()}},4));4.7.B.S(\'38\',$.q(9(a){8(a.39==27){4.19(N)}},4));4.7.p.S(\'R\',$.q(9(a){$(\'13[n=R]:1C, D[n=R]:1C, D:1C\',4.7.p).1O(\'1h\');8(!6.p.12){a.1d()}},4));4.L.A.S(\'14\',$.q(9(){$(4).28(\'14\')},4));4.L.A.S(\'1k\',$.q(9(){$(4).28(\'19\')},4))},14:9(g,h,j){v k=[\'2b\',\'2J\',\'2K\',\'1e\',\'2d\'];4.7.B.2e(4.6.r,$.q(9(c){h=$.11(P,{n:\'2b\',p:{\'12\':N}},h||{});8(1z h.U==="Q"){8(h.n==\'2d\'||h.n==\'1e\'){v d=[{n:\'R\',w:\'2g\'},{n:\'1n\',w:\'2R\'}]}G{v d=[{n:\'R\',w:\'2g\'}]}}G{v d=h.U};8(1z h.V==="Q"&&h.n==\'1e\'){v f=[{n:\'2T\',r:\'1e\',w:\'\'}]}G{v f=h.V};4.1j=$.1Z(j)?j:9(e){};8(1z f!=="Q"){4.7.V=$(\'<T I="\'+4.6.r+\'-V"></T>\');4.7.p.M(4.7.V);$.1y(f,$.q(9(i,a){8(a.n==\'2W\'){1H=a.H?\'<H I="\'+4.6.r+\'-H">\':\'\';1w=a.H?a.H+\'</H>\':\'\';a.w=a.w===Q?\'1\':a.w;1I=a.r===Q?4.6.r+\'-H-\'+i:a.r;4.7.V.M($(1H+\'<13 n="\'+a.n+\'" 1V="18:31; C:1K;" r="\'+1I+\'" w="\'+a.w+\'" 2p="2q"/> \'+1w))}G{1H=a.H?\'<H I="\'+4.6.r+\'-H">\'+a.H:\'\';1w=a.H?\'</H>\':\'\';a.w=a.w===Q?\'\':a.w;2r=a.1o===Q||a.1o==N?\'\':\'1o="P"\';1I=a.r===Q?4.6.r+\'-H-\'+i:a.r;4.7.V.M($(1H+\'<13 n="\'+a.n+\'" r="\'+1I+\'" w="\'+a.w+\'" 2p="2q" \'+2r+\'/>\'+1w))}},4))}4.7.U=$(\'<T I="\'+4.6.r+\'-U"></T>\');4.7.p.M(4.7.U);8(h.p.12){4.7.p.1x(\'1f\',h.p.1f===Q?\'#\':h.p.1f);4.7.p.1x(\'1a\',h.p.1a===Q?\'1D\':h.p.1a);4.6.p.12=P}G{4.7.p.1x(\'1f\',\'#\');4.7.p.1x(\'1a\',\'1D\');4.6.p.12=N}8(h.n!=\'1e\'){$.1y(d,$.q(9(i,a){8(a.n==\'R\'){4.7.U.M($(\'<D n="R" I="\'+4.6.r+\'-D-R \'+(a["I"]||"")+\'">\'+a.w+\'</D>\').S(\'1h\',$.q(9(e){4.19(a.w);e.1d()},4)))}G 8(a.n==\'1n\'){4.7.U.M($(\'<D n="D" I="\'+4.6.r+\'-D-1n \'+(a["I"]||"")+\'">\'+a.w+\'</D>\').S(\'1h\',$.q(9(e){4.19(N);e.1d()},4)))}},4))}G 8(h.n==\'1e\'){$.1y(d,$.q(9(i,a){8(a.n==\'R\'){4.7.U.M($(\'<D n="R" I="\'+4.6.r+\'-D-R \'+(a["I"]||"")+\'">\'+a.w+\'</D>\').S(\'1h\',$.q(9(e){8($(\'13[1o="P"]:2u(:w)\').2v>0){$(\'13[1o="P"]:2u(:w):1C\').2w();4.16()}G 8(4.6.p.12){F P}G{4.19(4.2x($(\'13\',4.7.V)))}e.1d()},4)))}G 8(a.n==\'1n\'){4.7.U.M($(\'<D n="D" I="\'+4.6.r+\'-D-1n \'+(a["I"]||"")+\'">\'+a.w+\'</D>\').S(\'1h\',$.q(9(e){4.19(N);e.1d()},4)))}},4))};4.7.p.3a(g);$.1y(k,$.q(9(i,e){4.7.Y.3b(4.6.r+\'-\'+e)},4));4.7.Y.3c(4.6.r+\'-\'+h.n);4.17();4.1g=P;4.L.14();4.7.B.u({18:\'26\',J:(($(1r).C()-4.6.C)/2)});4.17();2y($.q(9(){v b=$(\'13, D\',4.7.B);8(b.2v){b.3d(0).2w()}},4),4.6.1N)},4));4.i++;8(4.i==1){4.7.B.2z(4.6.r)}},2x:9(b){F $.3f(b,9(a){F $(a).2t()})},17:9(){v a={x:$(1b).C(),y:$(1b).E()};v b={x:$(1b).3g(),y:$(1b).3h()};v c=4.7.B.3i();v y=0;v x=0;y=b.x+((a.x-4.6.C)/2);8(4.6.2l=="3j"){x=(b.y+a.y+1F)}G{x=(b.y-c)-1F}8(4.1g){8(4.1A){4.1A.1M}4.1A=4.7.B.1p({J:y,X:b.y+((a.y-c)/2)},{20:4.6.1N,2e:N,2A:\'21\'})}G{4.7.B.u({X:x,J:y})}},19:9(a){4.7.B.u({18:\'1m\',X:0});4.1g=N;8($.1Z(4.1j)){4.1j.2B(4,$.3l(a))}2y($.q(9(){4.i--;4.7.B.2z(4.6.r)},4),4.6.1i);8(4.i==1){4.L.1k()}4.17();4.7.p.3m()},16:9(){v x=4.6.16.2n;v d=4.6.16.20;v t=4.6.16.Z;v o=4.6.16.2m;v l=4.7.B.W().J;v e=4.7.B;3p(i=0;i<o;i++){e.1p({J:l+x},d,t);e.1p({J:l-x},d,t)};e.1p({J:l+x},d,t);e.1p({J:l},d,t)}},B:9(a,b,c){8(1z a=="3q"){$.1v.22(a)}G{F $.1v.14(a,b,c)}}});$(9(){8(3r($.3s.2o)>1.2){$.1v.1s()}G{3t"3u 1Q 3v 3w 3x 3y 3z 3A 3B. 3C 3D 1Q 1.3+";}})})(1Q);',62,227,'||||this||options|esqueleto|if|function||||||||||||||type||form|proxy|name|||css|var|value||||element|msgbox|width|button|height|return|else|label|class|left|zIndex|overlay|append|false|shim|true|undefined|submit|bind|div|buttons|inputs|position|top|wrapper|transition||extend|active|input|show|resize|shake|moveBox|display|close|method|window|background|preventDefault|prompt|action|visible|click|closeDuration|callback|hide|100|none|cancel|required|animate|hidden|document|create|absolute|border|MsgBoxObject|fLabel|attr|each|typeof|animation|showDuration|first|post|opacity|80|target|iLabel|iName|hideOnClick|auto|color|stop|moveDuration|trigger|body|jQuery|box|shadow|15px|rgba|style|radius|6px|modal|isFunction|duration|easeOutBackMin|config|addevents|moz|word|block||triggerHandler|margin|inject|alert|index|confirm|queue|getTime|Accept|Date|new|id|webkit|emergefrom|loops|distance|jquery|autocomplete|off|iRequired|defaults|val|not|length|focus|toArguments|setTimeout|dequeue|easing|apply|support|expr|FFFFFF|200|fadeIn|10000|unbind|info|error|fadeOut|arguments|parseInt|wrap|break|static|Cancel|relative|text|420|iframe|checkbox|IF_|550|no|frameborder|inline|formaction|src|min|zoom|insertAfter|scroll|keydown|keyCode|prepend|removeClass|addClass|get|html|map|scrollLeft|scrollTop|outerHeight|bottom|000000|makeArray|empty|right|fixed|for|object|parseFloat|fn|throw|The|version|that|was|loaded|is|too|old|MsgBox|requires|scrolling'.split('|'),0,{}));

/**
 * jquery.msgbox v8.0
 * http://jmsgbox.com
 */
(function(e,t){var n={Esc:27,Space:32,Left:37,Right:39,Up:38,Down:40,Tab:9,Enter:13};var r={fixed:true,overlay:true,overlayEvent:"flash",id:0,open:false,drag:window,resize:true,title:false,type:"html",content:false,icons:[],buttons:[],buttonEvents:{},keyEvents:{Esc:"close",Space:"play",Left:"prev",Right:"next",Enter:"play"},prefix:"jMsgbox",width:600,height:450,initialWidth:350,initialHeight:220,top:false,left:false,titleHeight:30,footHeight:40,transition:"swing",speed:300,opacity:.9,zIndex:99,lang:"en",minPos:"top",minWidth:200,photoAuto:true,photoSpeed:2500,photoScaled:false,photoFade:500,padding:0,imgError:"Failed to load image.",xhrError:"Failed to load URL.",onOpen:false,onClose:false,onLoad:false,onBeforeClose:false};var i=function(t,n,r,i){r=r||{};i=i||{};return e(document.createElement(t)).addClass(n).attr(i).css(r)};var s=function(){return window.innerHeight?window.innerHeight:e(window).height()};var o=function(t,n){if(!e.msgboxI18N||!e.msgboxI18N[n]||!e.msgboxI18N[n][t])return t;return e.msgboxI18N[n][t]};var u=function(e,t){this.$overlay;this.$wrap;this.$controls;this.$icons={};this.$title;this.$content;this.$loaded;this.$prompt;this.$iframe;this.$foot;this.$img;this.$buttons={};this.$resize;this.$trigger=e;this.options=t;this.v;this.loaded=false;this.minimized=false;this.maximized=false;this.opened=false;this.dragData={};this.resizeData={};this.playing=false;this.titleSpecified=false;this.index=0;this._completeOptions();this._assemble();this._append();this._bindEvents();if(this.options.open)this.open()};u.prototype={_completeOptions:function(){switch(this.options.type){case"confirm":case"prompt":if(this.options.buttons!==null&&this.options.buttons.length==0)this.options.buttons=["OK","Cancel"];if(this.options.icons!==null&&this.options.icons.length==0)this.options.icons=["close"];if(this.options.width==r.width&&this.options.height==r.height){this.options.width=this.options.initialWidth;this.options.height=this.options.initialHeight}break;case"alert":case"warning":case"info":case"error":case"success":if(this.options.buttons!==null&&this.options.buttons.length==0)this.options.buttons=["OK"];if(this.options.icons!==null&&this.options.icons.length==0)this.options.icons=["close"];if(this.options.width==r.width&&this.options.height==r.height){this.options.width=this.options.initialWidth;this.options.height=this.options.initialHeight}break;case"photo":case"image":if(this.$trigger&&!this.options.content)this.options.content=this.$trigger;if(this.options.icons!==null&&this.options.icons.length==0)this.options.icons=["close"];this.options.resize=false;break;case"album":case"gallery":if(this.$trigger&&!this.options.content)this.options.content=this.$trigger.selector;if(this.options.icons!==null&&this.options.icons.length==0)this.options.icons=["prev","play","next","close"];this.options.resize=false;break;default:if(this.options.icons!==null&&this.options.icons.length==0)this.options.icons=["max","close"];break}if(e.inArray(this.options.type,["ajax","iframe"])>-1&&!this.options.content&&this.$trigger){this.options.content=this.$trigger.attr("href")}if(!this.options.width)this.options.width=this.options.initialWidth;if(!this.options.height)this.options.height=this.options.initialHeight;if(!this.options.content&&e.inArray(this.options.type,["ajax","iframe","photo","image","album","gallery"])==-1)this.options.content="jquery.msgbox v "+e.msgbox.version;if(this.options.buttons===null||this.options.buttons.length==0)this.options.footHeight=0;if(this.$trigger)this.options.id=0;if(this.options.title)this.titleSpecified=true;if(this.options.photoFade===true)this.options.photoFade=r.photoFade;if(this.options.photoFade===false)this.options.photoFade=0;e.msgboxI18N=e.msgboxI18N||{};e.msgboxI18N.en=e.msgboxI18N.en||{};e.msgboxI18N.en.xhrError=e.msgboxI18N.en.xhrError||this.options.xhrError;e.msgboxI18N.en.imgError=e.msgboxI18N.en.imgError||this.options.imgError},_assemble:function(){this.$overlay=i("div",this.options.prefix+"-overlay",{position:"fixed",top:0,left:0,height:"100%",width:"100%",opacity:this.options.opacity,display:"none"});var t=this.options.top!==false?this.options.top:(s()-this.options.initialHeight)/2-this.options.titleHeight;var n=this.options.left!==false?this.options.left:(e(window).width()-this.options.initialWidth)/2;this.$wrap=i("span",this.options.prefix+"-wrap",{display:"none",width:this.options.initialWidth,height:this.options.initialHeight,position:this.options.fixed?"fixed":"absolute",overflow:"hidden",top:this.options.fixed?t:t+e(window).scrollTop(),left:this.options.fixed?n:n+e(window).scrollLeft()});this.$title=i("div",this.options.prefix+"-title",{position:"relative",height:this.options.titleHeight,cursor:this.options.drag?"move":"auto"});if(this.options.title)this.$title.html(this.options.title);var r={display:"inline-block"};this.$icons.prev=i("a",this.options.prefix+"-prev",r,{href:"javascript:;",title:o("Prev",this.options.lang)});this.$icons.next=i("a",this.options.prefix+"-next",r,{href:"javascript:;",title:o("Next",this.options.lang)});this.$icons.play=i("a",this.options.prefix+"-play",r,{href:"javascript:;",title:o("Play/Pause",this.options.lang)});this.$icons.min=i("a",this.options.prefix+"-min",r,{href:"javascript:;",title:o("Minimize",this.options.lang)});this.$icons.max=i("a",this.options.prefix+"-max",r,{href:"javascript:;",title:o("Maximize",this.options.lang)});this.$icons.close=i("a",this.options.prefix+"-close",r,{href:"javascript:;",title:o("Close",this.options.lang)});this.$controls=i("span",this.options.prefix+"-controls",{position:"absolute",height:"100%"});if(this.options.icons!==null){for(var u=0;u<this.options.icons.length;u++){this.$controls.append(this.$icons[this.options.icons[u]])}}var a={type:"button"};this.$buttons.OK=i("input",this.options.prefix+"-ok",{},a);this.$buttons.Cancel=i("input",this.options.prefix+"-cancel",{},a);this.$buttons.OK.val(o("OK",this.options.lang));this.$buttons.Cancel.val(o("Cancel",this.options.lang));this.$foot=i("div",this.options.prefix+"-foot",{position:"relative",height:this.options.footHeight,"line-height":this.options.footHeight});if(this.options.buttons!==null){var f=0;for(var u=0;u<this.options.buttons.length;u++){if(!this.$buttons[this.options.buttons[u]])this.$buttons[this.options.buttons[u]]=i("input",this.options.prefix+"-button-"+ ++f,{},a).val(this.options.buttons[u]);this.$foot.append(this.$buttons[this.options.buttons[u]])}}this.$resize=i("a",this.options.prefix+"-resize",{cursor:"se-resize",position:"absolute",bottom:"0px",right:"0px",display:"inline-block"},{href:"javascript:;"});if(!e.support.boxSizing){this.$resize.css({right:"5px",bottom:"5px"})}this.$content=i("div",this.options.prefix+"-content",{overflow:"hidden",position:"relative"});this.$prompt=i("input",this.options.prefix+"-prompt-input",{},{type:"text"});this.$loaded=i("div",this.options.prefix+"-loaded",{padding:this.options.padding,width:"100%",height:"100%",overflow:e.inArray(this.options.type,["photo","image","album","gallery"])==-1?"auto":"hidden"});this.$loading=i("div",this.options.prefix+"-loading",{height:"100%",width:"100%"})},_append:function(){if(this.options.overlay)e(document.body).append(this.$overlay);e(document.body).append(this.$wrap.append(this.$title.append(this.$controls),this.$content.append(this.$loaded)));if(this.options.buttons!==null&&this.options.buttons.length>0){this.$foot.appendTo(this.$wrap);if(this.options.resize)this.$resize.appendTo(this.$foot)}else{if(this.options.resize)this.$resize.appendTo(this.$content)}},_bindEvents:function(){var r=this;if(this.$trigger){this.$trigger.bind("click."+this.options.prefix,function(e){e.preventDefault();r.focus()})}this.enableResize();this.enableDrag();if(this.options.overlay&&this.options.overlayEvent){var i=false;if(e.isFunction(this.options.overlayEvent))i=this.options.overlayEvent;else if(e.isFunction(this[this.options.overlayEvent])){i=this[this.options.overlayEvent]}if(i)this.$overlay.bind("click."+this.options.prefix,function(){i.apply(r)})}switch(this.options.type){case"confirm":if(!this.options.buttonEvents.OK){this.options.buttonEvents.OK=function(){this.close(function(){this.v=true})}}if(!this.options.buttonEvents.Cancel){this.options.buttonEvents.Cancel=function(){this.close(function(){this.v=false})}}break;case"prompt":if(!this.options.buttonEvents.OK){this.options.buttonEvents.OK=function(){this.close(function(){this.v=this.$prompt.val()})}}if(!this.options.buttonEvents.Cancel){this.options.buttonEvents.Cancel=function(){this.close(function(){this.v=t})}}break;default:if(!this.options.buttonEvents.OK){this.options.buttonEvents.OK="close"}break}e.each(this.options.buttonEvents,function(t,n){if(!e.isFunction(n))n=e.isFunction(r[n])?r[n]:false;if(!n)return;r.$buttons[t].bind("click."+r.options.prefix,function(){n.apply(r)})});e.each(this.$icons,function(e,t){var n;switch(e){case"close":n=function(e){e.stopPropagation();r.close()};t.bind("click."+r.options.prefix,n);break;case"max":n=function(e){e.stopPropagation();r.max()};t.unbind("click.max."+r.options.prefix).one("click.max."+r.options.prefix,n);break;case"min":n=function(e){e.stopPropagation();r.min()};t.unbind("click.min."+r.options.prefix).one("click.min."+r.options.prefix,n);break;case"play":n=function(e){e.stopPropagation();r.play()};t.bind("click.play."+r.options.prefix,n);break;case"prev":n=function(e){e.stopPropagation();r.prev()};t.bind("click.prev."+r.options.prefix,n);break;case"next":n=function(e){e.stopPropagation();r.next()};t.bind("click.next."+r.options.prefix,n);break}});this.$wrap.bind("mousedown."+r.options.prefix,function(){e(this).css("z-index",++e.msgbox._zIndex);e.msgbox._focused=r});e.each(this.options.keyEvents,function(t,i){t=n[t]||t;if(!t)return;if(!e.isFunction(i))i=e.isFunction(r[i])?r[i]:false;if(!i)return;e(document).bind("keydown."+r.options.prefix,function(n){if(n.keyCode!==t)return;if(e.msgbox._focused!=r)return;i.apply(r)})})},_loadImg:function(n,r){if(!n||n.length==0)return;var s=this;this.$loading=i("div",this.options.prefix+"-loading",{height:"100%",width:"100%"}).appendTo(this.$loaded);if(!this.titleSpecified)this.title(n.attr("title"));var u=function(){s.$loading.remove();s.$loading=t;if(s.options.photoScaled){var e=s.options.height-s.options.titleHeight-s.options.footHeight;var n=s.$img.outerHeight(true);var i=s.$img.outerWidth(true);var o=1;if(n>e)o=e/n;if(i*o>s.options.width)o=s.options.width/i;var u=i*o,a=n*o;s.$img.css({position:"absolute",width:i*o+"px",height:n*o+"px"});if(a<=e)s.$img.css("top",(e-a)/2+"px");if(u<=s.options.width)s.$img.css("left",(s.options.width-u)/2+"px")}else{s.options.height=s.$img.outerHeight(true)+s.options.titleHeight+s.options.footHeight;s.options.width=s.$img.outerWidth(true)}s.$img.fadeIn(s.options.photoFade);s.loaded=true;if(s.options.onLoad)s.options.onLoad.apply(s);if(r)r.apply(s)};if(!this.$img){this.$img=i("img",this.options.prefix+"-photo");e.each(["alt","longdesc","aria-describedby"],function(e,t){var r=n.attr(t)||n.attr("data-"+t)||"";s.$img.attr(t,r)});this.$img.hide().appendTo(this.$loaded).error(function(){s.$loading.remove();s.$loading=t;s.loaded=true;s.content(o("imgError",s.options.lang))})}this.$img.hide().unbind("load."+this.options.prefix).bind("load."+this.options.prefix,u);setTimeout(function(){s.$img.attr("src",n.attr("href"))},1)},_load:function(n){if(this.loaded)return;switch(this.options.type){case"text":this.$loaded.text(this.options.content);this.loaded=true;if(n)n.apply(this);if(this.options.onLoad)this.options.onLoad.apply(this);break;case"html":var r=e.type(this.options.content)==="object"?this.options.content.show():this.options.content;this.$loaded.append(r);this.loaded=true;if(n)n.apply(this);if(this.options.onLoad)this.options.onLoad.apply(this);break;case"alert":case"warning":case"info":case"error":case"success":case"confirm":var r=e.type(this.options.content)==="object"?this.options.content.show():this.options.content;this.$loaded.append(r).addClass(this.options.prefix+"-shortcut "+this.options.prefix+"-"+this.options.type);this.loaded=true;if(n)n.apply(this);if(this.options.onLoad)this.options.onLoad.apply(this);break;case"prompt":var r=e.type(this.options.content)==="object"?this.options.content.show():this.options.content;this.$loaded.append(r).append(this.$prompt).addClass(this.options.prefix+"-shortcut "+this.options.prefix+"-"+this.options.type);this.loaded=true;if(n)n.apply(this);if(this.options.onLoad)this.options.onLoad.apply(this);break;case"ajax":this.$loading=i("div",this.options.prefix+"-loading",{height:"100%",width:"100%"}).appendTo(this.$content);var s=this;this.$loaded.load(this.options.content,function(e,r){s.$loading.remove();s.$loading=t;s.$loaded.appendTo(s.$content);if(r=="error")s.$loaded.html(o("xhrError",s.options.lang));s.loaded=true;if(n)n.apply(s);if(s.options.onLoad)s.options.onLoad.apply(s)});break;case"photo":case"image":var u=e(this.options.content);this._loadImg(u,n);break;case"album":case"gallery":var a=this.$trigger?this.$trigger.index(this.options.content):0;this.index=a<0?0:a;var u=e(this.options.content).eq(this.index);var s=this;this._loadImg(u,function(){s.$img.unbind("click."+s.options.prefix).bind("click."+s.options.prefix,function(){s.next()});if(n)n.apply(s)});break;case"iframe":var f=i("div",this.options.prefix+"-loading",{height:this.$content.innerHeight()+"px",width:"100%"}).appendTo(this.$content);if(!this.options.title){this.title(o("Loading",this.options.lang)+" ...");this.options.title=false}var s=this;this.$iframe=i("iframe",this.options.prefix+"-iframe",{height:"100%",width:"100%",border:"none",display:"none"},{frameborder:0,marginheight:"0px",marginwidth:"0px",scrolling:"auto",src:this.options.content}).appendTo(s.$loaded).one("load",function(){f.remove();s.$iframe.show();if(!s.options.title){var t="";try{t=e("title",s.$iframe.contents()).text()}catch(r){}s.title(t)}s.loaded=true;if(s.options.onLoad)s.options.onLoad.apply(s);if(n)n.apply(s)});break}},_restoreFromMin:function(e){if(!this.minimized)return;var t=this;this.animate(this.minimized,function(){t.minimized=false;t.$icons.min.removeClass(t.options.prefix+"-restore");t.$wrap.css("position",t.options.fixed?"fixed":"absolute");t.$icons.min.unbind("click.min."+t.options.prefix).one("click.min."+t.options.prefix,function(){t.min()});t.enableDrag();t.enableResize();if(e)e.apply(t)})},_min:function(e,t){if(this.minimized)return;var n={width:parseInt(this.$wrap.css("width")),height:parseInt(this.$wrap.css("height")),top:parseInt(this.$wrap.css("top")),left:parseInt(this.$wrap.css("left"))};var r=this;this.animate(e,function(){r.minimized=n;r.$icons.min.addClass(r.options.prefix+"-restore");r.$wrap.css("position","fixed");r.$icons.min.unbind("click.restore."+r.options.prefix).one("click.restore."+r.options.prefix,function(){r.restore()});if(!this.$trigger)r.disableDrag();r.disableResize();if(t)t.apply(r)})},enableDrag:function(){if(this.options.drag===false)return;var n=this;this.$title.css("cursor","move").bind("mousedown.drag."+this.options.prefix,function(r){n.dragData.x=r.pageX;n.dragData.y=r.pageY;n.dragData.top=parseInt(n.$wrap.css("top"));n.dragData.left=parseInt(n.$wrap.css("left"));n.dragData.width=parseInt(n.$wrap.css("width"));n.dragData.height=parseInt(n.$wrap.css("height"));e(document).one("mouseup.drag."+n.options.prefix,function(t){n.dragData={};e(this).unbind(" mousemove.drag."+n.options.prefix)}).bind("mousemove.drag."+n.options.prefix,function(r){r.preventDefault();if(e.isEmptyObject(n.dragData))return;var i=n.dragData.left+r.pageX-n.dragData.x;var s=n.dragData.top+r.pageY-n.dragData.y;var o=n.dragData.width;var u=n.dragData.height;var a=e(n.options.drag);if(a.length>0){var f=a.offset();if(!f)f={left:0,top:0};if(!n.options.fixed){f.left+=e(window).scrollLeft();f.top+=e(window).scrollTop()}var l=f.left;var c=f.top;var h=f.left+a.innerWidth();var p=f.top+a.innerHeight();i=i<=l?l:i;i=i+o>h?h-o:i;s=s+u>p?p-u:s;s=s<=c?c:s}n.animate({width:o,height:u,top:s,left:i},t,0)})})},disableDrag:function(){this.$title.css("cursor","auto").unbind("mousedown.drag."+this.options.prefix)},enableResize:function(){if(this.options.resize===false)return;var n=this;this.$resize.show().bind("mousedown.resize."+this.options.prefix,function(r){n.resizeData.x=r.pageX;n.resizeData.y=r.pageY;n.resizeData.width=parseInt(n.$wrap.css("width"));n.resizeData.height=parseInt(n.$wrap.css("height"));n.resizeData.top=parseInt(n.$wrap.css("top"));n.resizeData.left=parseInt(n.$wrap.css("left"));e(document).bind("mouseup.resize."+n.options.prefix,function(t){n.resizeData={};e(this).unbind("mouseup.resize."+n.options.prefix+" mousemove.resize."+n.options.prefix)}).bind("mousemove.resize."+n.options.prefix,function(r){r.preventDefault();if(e.isEmptyObject(n.resizeData))return;var i=n.resizeData.width+r.pageX-n.resizeData.x;var s=n.resizeData.height+r.pageY-n.resizeData.y;i=i<n.options.resize.width?n.options.resize.width:i;s=s<n.options.resize.height?n.options.resize.height:s;n.animate({width:i,height:s,top:n.resizeData.top,left:n.resizeData.left},t,0)})})},disableResize:function(){this.$resize.hide().unbind("mousedown.resize."+this.options.prefix)},animate:function(n,r,i){n=n||{};n=e.extend({},{top:this.options.top,left:this.options.left,width:this.options.width,height:this.options.height,opacity:1},n);if(i===t)i=this.options.speed;var o=(s()-n.height)/2-this.options.titleHeight;var u=(e(window).width()-n.width)/2;o=o<0?0:o;if(n.top===false)n.top=this.options.fixed?o:o+e(window).scrollTop();if(n.left===false)n.left=this.options.fixed?u:u+e(window).scrollLeft();var a=this;this.$overlay.fadeTo(i,this.options.opacity);var f=function(){a.$content.height(a.$wrap.height()-a.options.titleHeight-a.options.footHeight)};this.$wrap.dequeue().animate(n,{duration:i,complete:function(){f();if(r)r.apply(a)},step:f,easing:this.options.transition})},flash:function(t,n,r){t=t||.3;n=n||100;var i=this;this.$title.fadeTo(0,t).delay(n).fadeTo(0,1).delay(n).fadeTo(0,t).delay(n).fadeTo(0,1).queue(function(){if(r)r.apply(i);e(this).dequeue()})},play:function(e){if(this.options.type!="album"&&this.options.type!="gallery")return;if(this.playing&&this.playing!=-1&&this.playing!=-2){this.pause();return}var t=this;this.$icons.play.removeClass(this.options.prefix+"-pause");this.playing=setTimeout(function(){t.next(e)},t.options.photoSpeed)},pause:function(){if(this.options.type!="album"&&this.options.type!="gallery")return;if(!this.playing||this.playing===-1||this.playing===-2)return;if(this.playing){clearTimeout(this.playing);this.playing=-1}var e=this;this.$icons.play.addClass(this.options.prefix+"-pause")},next:function(t){if(this.options.type!="album"&&this.options.type!="gallery")return;this.index++;this.index=this.index>=e(this.options.content).length?0:this.index;var n=e(this.options.content).eq(this.index);var r=this;if(r.playing&&r.playing!=-1&&r.playing!=-2)clearTimeout(r.playing);this._loadImg(n,function(){if(r.playing&&r.playing!=-1&&r.playing!=-2){r.playing=setTimeout(function(){r.next(t)},r.options.photoSpeed)}r.animate();if(t)t.apply(r)})},prev:function(t,n){if(this.options.type!="album"&&this.options.type!="gallery")return;this.index--;this.index=this.index>=e(this.options.content).length?0:this.index;var r=e(this.options.content).eq(this.index);var i=this;if(i.playing&&i.playing!=-1&&i.playing!=-2)clearTimeout(i.playing);this._loadImg(r,function(){if(i.playing&&i.playing!=-1&&i.playing!=-2){i.playing=setTimeout(function(){i.next(n)},i.options.photoSpeed)}i.animate();if(n)n.apply(i)})},open:function(n){if(this.opened)return;this.$overlay.show().css("z-index",++e.msgbox._zIndex);this.$wrap.show().css("z-index",e.msgbox._zIndex);this.options.titleHeight=this.$title.outerHeight(true);this.$title.css({"line-height":this.options.titleHeight+"px"});if(this.options.footHeight>0){this.options.footHeight=this.$foot.outerHeight(true);this.$foot.css({"line-height":this.options.footHeight+"px"})}this.$content.height(this.$wrap.height()-this.options.titleHeight-this.options.footHeight);if(this.options.resize===true){this.options.resize={width:this.options.minWidth,height:this.options.buttons!==null&&this.options.buttons.length>0?this.options.titleHeight+this.options.footHeight+5:this.options.titleHeight+5}}var r=this;var i=function(){r.opened=true;e.msgbox._focused=r;if(r.options.onOpen)r.options.onOpen.apply(r);if(n)n.apply(r)};var s=function(){if((r.options.type=="album"||r.options.type=="gallery")&&r.options.photoAuto&&r.options.photoSpeed&&(!r.playing||r.playing==-2)){r.play()}};if(this.loaded){this.animate(t,function(){i();s()})}else{this._load(function(){r.animate(t,i);s()})}},val:function(){return this.v},close:function(t){if(!this.opened)return;if(this.options.onBeforeClose&&this.options.onBeforeClose.apply(this)===false)return;if(this.playing&&this.playing!=-1&&this.playing!=-2){clearTimeout(this.playing);this.playing=-2}var n=this;var r=function(e){n.animate({width:n.options.initialWidth,height:n.options.initialHeight,opacity:0},function(){n.$overlay.fadeOut("fast",function(){n.opened=false;n.$wrap.hide();n.$overlay.hide();if(e)e.apply(n);if(n.options.onClose)n.options.onClose.apply(n)})})};if(!this.$trigger&&this.minimized)e.msgbox._arrangeMin(this,"out",function(){r(t)});else r(t)},remove:function(){if(this.$trigger)this.$trigger.unbind("click."+this.options.prefix);this.$overlay.remove();this.$wrap.remove()},title:function(n){if(n===t)return this.options.title;this.options.title=n;var r=this;this.$title.contents().filter(function(){return this.nodeType==3||!e(this).is(r.$controls)}).remove();this.$title.prepend(n);return this},reload:function(e){this.loaded=false;if(this.options.type=="iframe"){this.$iframe.remove()}else{if(this.$loaded)this.$loaded.remove()}this._load(e)},focus:function(n){this.$overlay.css("z-index",++e.msgbox._zIndex);this.$wrap.css("z-index",e.msgbox._zIndex);var r=this;if(!this.opened){this.open(n)}else if(this.minimized){this.restore(function(){e.msgbox._focused=r;if(n)n.apply(r)})}else{this.flash(t,t,function(){e.msgbox._focused=r;if(n)n.apply(r)})}},restore:function(t){if(this.minimized){this.$trigger?this._restoreFromMin(t):e.msgbox._arrangeMin(this,"out",t)}else if(this.maximized){var n=this;this.animate(this.maximized,function(){n.maximized=false;n.$icons.max.removeClass(n.options.prefix+"-restore");n.$wrap.css("position",n.options.fixed?"fixed":"absolute");n.$icons.max.unbind("click.max."+n.options.prefix).one("click.max."+n.options.prefix,function(){n.max()});n.enableDrag();n.enableResize();if(t)t.apply(n)})}},min:function(t){if(this.minimized){this.restore(t)}else{this.$trigger?this._min({width:this.options.minWidth,height:this.options.titleHeight}):e.msgbox._arrangeMin(this,"in",t)}},max:function(t){if(this.maximized){this.restore(t);return}var n=this,r=e.extend({},this.minized);if(this.minimized){this.minimized={top:0,left:0,width:e(window).width(),height:s()};e.msgbox._arrangeMin(this,"out",function(){n.maximized=r;n.$icons.max.addClass(n.options.prefix+"-restore");n.$wrap.css("position","fixed");n.$icons.max.unbind("click.restore."+n.options.prefix).one("click.restore."+n.options.prefix,function(){n.restore()});n.disableDrag();n.disableResize();if(t)t.apply(n)})}else{var r={width:parseInt(this.$wrap.css("width")),height:parseInt(this.$wrap.css("height")),top:parseInt(this.$wrap.css("top")),left:parseInt(this.$wrap.css("left"))};var n=this;this.animate({top:0,left:0,width:e(window).width(),height:s()},function(){n.maximized=r;n.$icons.max.addClass(n.options.prefix+"-restore");n.$wrap.css("position","fixed");n.$icons.max.unbind("click.restore."+n.options.prefix).one("click.restore."+n.options.prefix,function(){n.restore()});n.disableDrag();n.disableResize();if(t)t.apply(n)})}},content:function(e){var n=this;if(e===t){return this.$loaded.html()}else{this.$loaded.html(e)}return true}};e.fn.msgbox=function(t){if(typeof t=="object"){t=e.extend(true,{},r,t);var n=e(this).selector;return this.each(function(){var r=e(this);r.selector=n;var i=new u(r,t);e(this).data("msgbox."+t.id,i)})}else{t=t||0;var i=e(this).data("msgbox."+t);return i}return this};e.msgbox=function(n){if(typeof n=="object"){var i=n.open===t?true:n.open;n=e.extend(true,{},r,n);var s=e(document.body).data("msgbox."+n.id);if(s){s.focus()}else{s=new u(false,n);e(document.body).data("msgbox."+n.id,s);if(i)s.open()}return s}else{n=n||0;var s=e(document.body).data("msgbox."+n);return s}};e.extend(e.msgbox,{defaults:function(t){e.extend(r,t);e.msgbox._zIndex=r.zIndex},version:"8.0",_focused:null,_zIndex:r.zIndex,closeAll:function(t){var n=e(document.body).data();var r=e({});e.each(n,function(e,t){if(e.indexOf("msgbox.")===0&&t.opened){r.queue("closeAll",function(e){t.close(e)})}});if(t)r.queue("closeAll",t);r.dequeue("closeAll")},restoreAll:function(t){var n=e(document.body).data();var r=e({});e.each(n,function(e,t){if(e.indexOf("msgbox.")===0&&t.minimized){r.queue("restoreAll",function(e){t.restore(e)})}});if(t)r.queue("restoreAll",t);r.dequeue("restoreAll")},minAll:function(t){var n=e(document.body).data();var r=e({});e.each(n,function(e,t){if(e.indexOf("msgbox.")===0&&!t.minimized){r.queue("minAll",function(e){t.min(e)})}});if(t)r.queue("minAll",t);r.dequeue("minAll")},_arrangeMin:function(t,n,r){var i=e(document.body).data();if(!i)return;var o=[],u=0,a=0,f=[],l=3,c=e({});e.each(i,function(e,n){if(e.indexOf("msgbox.")===0&&(n.minimized||e=="msgbox."+t.options.id)&&n.options.minPos==t.options.minPos){o[e]=n;f.push(e);u+=n.options.minWidth+l}});f.sort();a=e.inArray("msgbox."+t.options.id,f);if(n=="in"){var h=1,p=0,d;if(u>e(window).width())h=e(window).width()/u;d=t.options.minWidth*h;e.each(f,function(e,n){if(e==a){c.queue("min",function(e){t._min({left:p,top:t.options.minPos=="bottom"?s()-t.options.titleHeight:0,width:d,height:t.options.titleHeight},function(){p+=d+l;e()})})}else{var r=o[n].options.minWidth*h;c.queue("min",function(e){o[n].animate({left:p,top:o[n].options.minPos=="bottom"?s()-o[n].options.titleHeight:0,width:r,height:o[n].options.titleHeight},function(){p+=r+l;e()},50)})}})}else{u-=t.options.minWidth;var h=1;if(u>e(window).width())h=e(window).width()/u;var p=0;c.queue("min",function(e){t._restoreFromMin(e)});e.each(f,function(e,n){if(e!=a)c.queue("min",function(e){var r=o[n].options.minWidth*h;o[n].animate({left:p,top:t.options.minPos=="bottom"?s()-o[n].options.titleHeight:0,width:r,height:o[n].options.titleHeight},e,50);p+=r+l})})}if(r){c.queue("min",r)}c.dequeue("min")}})})(jQuery,undefined)